# Руководство по тестированию

## Обзор

В этом документе описывается стратегия тестирования для приложения "Translator with educational functions". Включает в себя типы тестов, тестовые сценарии, методы и подходы к тестированию.

## Стратегия тестирования

### Уровни тестирования

1. **Модульное тестирование (Unit Testing)**
   - Тестируют отдельные компоненты (методы, классы)
   - Покрывают бизнес-логику сервисов
   - Используют mock объекты для зависимостей

2. **Интеграционное тестирование**
   - Тестируют взаимодействие между компонентами
   - Проверяют взаимодействие с базой данных
   - Проверяют работу внешних API

3. **Системное тестирование**
   - Тестируют функциональность приложения в целом
   - Проверяют соответствие SRS

## Типы тестов

### 1. Функциональные тесты

#### Тесты контроллеров
- Проверяют правильность обработки HTTP-запросов
- Проверяют валидацию входных данных
- Проверяют корректность HTTP-ответов

#### Тесты сервисов
- Проверяют бизнес-логику
- Проверяют взаимодействие с репозиториями
- Проверяют корректность работы алгоритмов

#### Тесты репозиториев
- Проверяют корректность выполнения запросов к БД
- Проверяют маппинг объектов

### 2. Нефункциональные тесты

#### Тесты производительности
- Проверяют время отклика API
- Проверяют обработку множественных запросов

#### Тесты безопасности
- Проверяют защиту от несанкционированного доступа
- Проверяют валидацию входных данных

## Тестовые сценарии

### Сценарий 1: Процесс перевода текста

**Цель**: Проверить корректность процесса перевода текста

**Предусловия**: 
- Пользователь аутентифицирован
- Внешнее API (Google Gemini) доступно

**Шаги**:
1. Пользователь вводит текст на английском языке
2. Выбирает английский как исходный язык
3. Выбирает русский как целевой язык
4. Нажимает кнопку "Перевести"
5. Система отправляет запрос во внешнее API
6. Система получает и отображает результат
7. Перевод сохраняется в истории

**Ожидаемый результат**:
- Переведенный текст корректно отображается
- Перевод сохранен в истории пользователя
- В базе данных создана запись о переводе

### Сценарий 2: Создание и прохождение викторины

**Цель**: Проверить создание и прохождение викторины

**Предусловия**:
- Пользователь аутентифицирован
- У пользователя есть сохраненный перевод

**Шаги**:
1. Пользователь выбирает перевод для создания викторины
2. Система генерирует викторину с вопросами
3. Пользователь отвечает на вопросы
4. Система проверяет ответы
5. Отображаются результаты викторины

**Ожидаемый результат**:
- Викторина корректно сгенерирована
- Ответы пользователя проверены правильно
- Результаты корректно отображены

### Сценарий 3: Аутентификация пользователя

**Цель**: Проверить процесс входа и выхода пользователя

**Предусловия**:
- У пользователя есть учетная запись

**Шаги**:
1. Пользователь вводит логин и пароль
2. Нажимает кнопку "Войти"
3. Система проверяет учетные данные
4. Система создает JWT токен
5. Пользователь получает доступ к защищенным функциям
6. Пользователь нажимает "Выйти"
7. Сессия завершается

**Ожидаемый результат**:
- Пользователь успешно аутентифицирован
- JWT токен корректно создан и проверен
- После выхода доступ к защищенным функциям закрыт

## Тестирование API

### Тестирование endpoints

#### /api/translations
- GET - получение списка переводов пользователя
- POST - создание нового перевода
- GET /{id} - получение конкретного перевода
- DELETE /{id} - удаление перевода

#### /api/quizzes
- POST - создание новой викторины на основе перевода
- GET /{id} - получение викторины

#### /api/users
- POST /register - регистрация нового пользователя
- POST /login - аутентификация пользователя

## Тестовые данные

### Примеры тестовых данных

#### Тестовый текст для перевода
```
Original: "The quick brown fox jumps over the lazy dog"
Target Language: Russian
Expected Translation: "Быстрая коричневая лиса прыгает через ленивую собаку"
```

#### Тестовый пользователь
```
Username: "testuser"
Email: "test@example.com"
Password: "TestPassword123!"
```

## Инструменты тестирования

### Используемые библиотеки

1. **JUnit 5** - основа для написания тестов
2. **Mockito** - для создания mock объектов
3. **TestNG** - дополнительный фреймворк для тестирования
4. **Spring Test** - для интеграционного тестирования
5. **AssertJ** - для улучшенных проверок

### Тестирование с использованием Docker

Для тестирования в изолированной среде:
- Использовать Docker для запуска тестовой базы данных
- Отдельный профиль для тестов (application-test.properties)

## Покрытие тестами

### Цель по покрытию
- Минимум 80% покрытия юнит-тестами для бизнес-логики
- Покрытие всех основных сценариев использования
- Покрытие всех контроллеров интеграционными тестами

### Инструменты анализа покрытия
- JaCoCo - для измерения покрытия кода тестами
- Отчеты генерируются в HTML и CSV форматах

## Автоматизация тестирования

### CI/CD интеграция
- Тесты запускаются автоматически при каждом коммите
- Тесты запускаются в GitHub Actions или другом CI инструменте
- Неудачные тесты блокируют деплой

## Отчеты о тестировании

### Формат отчетов
- HTML отчеты с деталями покрытия
- JUnit XML отчеты для CI/CD систем
- Сводные отчеты с метриками качества